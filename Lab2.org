-*- line-spacing: 0.1; -*-
#+TITLE: Lab 2
#+STARTUP: latexpreview
#+STARTUP: show2levels
#+INCLUDE: "~/.doom.d/orgReportHeader.org"
#+OPTIONS: H:3 d:nil tags:nil email:t toc:t broken-links:t ^:t #\n:t

* Equipment
- Dc Power Supply
- Model Transmission Line
- Multi-meters
- Synchronization unit
** Alternator
#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Alternator Nameplate Values
#+NAME: tabAltNameplate
  | Stator Voltage (V) | Stator Voltage +20% (V) | Rotor Voltage (VDC) | Power (W) @1500 rpm |
  |--------------------+-------------------------+---------------------+---------------------|
  |               41.5 |                    49.8 |                  24 |                  50 |
    #+TBLFM: $2=$1 1.2

* Setup
- Load Switch Disabled
- 3-Phase power supply connected to load switch
- 3-Phase Wattmeter connected to the three phase supply
- Three Phase supply connected to the stator of the synchronous motor
- Dc power supply connected to synchronous machine rotor
- DC Power supply switched on
- DC Power to motor increased gradually
- DC Motor begins to turn Drive train at V \approx =8-11Vdc=
* Experiments
** synchronisation
*** Procedure
- Dc voltage increased until DC motor is running at synchronous speed \approx =1500rpm=
- Second DC Supply turned on to exit the rotor
- Excitation Current increased gradually
- Generator open circuit voltage noted as changing as excitation current to the rotor is increased?
- Machine is Disabled

** Open circuit Test
*** Procedure
- Name Plate Rating of the Synchronous machine noted


- Additional =20%= margin added to stator voltage rating
- DC Motor restarted
- Synchronous motor spun up to =1500rpm=
- The Generator side of the synchronisation unit is disconnected
- The Rotor excitation current is set to =0A=
- The rotor excitation current is increased in steps of =0.5A= until the measured stator voltage reaches =49.8V= (calculated according to: \(1.2\times V_{\text{stator Name-Plate}}\)).
  + for each =0.5A= step the synchronous speed was controlled to =1500rpm= by adjusting the supply to the DC Motor
  + for each step of =0.5A= the open circuit generator voltage was recorded

*** Results
#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Stator Line voltage Vs rotor Excitation current for open circuit test
#+NAME: tabOcTest
|   | I_{rot} (A) | V_{Line} (V) |
|---+-------------+--------------|
| ! |     I_rot_A |    V_stat_LL |
|   |       0.050 |         6.71 |
|   |       0.100 |        12.10 |
|   |       0.150 |        17.10 |
|   |       0.201 |        23.10 |
|   |       0.251 |        28.90 |
|   |       0.302 |        34.60 |
|   |       0.350 |        39.60 |
|   |       0.402 |        44.70 |
|   |       0.451 |        49.00 |
|   |       0.501 |        52.90 |

** Short Circuit Test
*** Procedure
- The leads leaving the 3 Phase wattmeter which were disconnected Last experiment are now connected together effectively short-circuiting the Generator
- The rotor field supply is set to zero and the supply is switched on
- The DC Motor is turned on and the DC voltage supply is adjusted until the speed of the drive train is at 1500 rpm
- Rotor field excitation current gradually increased in steps of =0.05A=
  + rotor speed is kept constant at =1500rpm= for each step
  + for each step the current flowing out of the generator terminals is noted

*** Results
#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Stator Current Vs rotor excitation current for short circuit test
#+NAME: tabScTest
|   | I_{rot} (mA) | I_{stat} (mA) |
|---+--------------+---------------|
| ! |     I_rot_mA |        I_stat |
|   |            0 |             0 |
|   |           52 |             0 |
|   |          101 |           350 |
|   |          150 |           496 |
|   |          200 |           639 |
|   |          250 |           786 |
|   |          299 |           930 |
|   |          325 |          1010 |

** Load Tests
*** Setup (Steps 1-2)
**** Synchronisation - (Step 1)
- Synchronous machine used as a generator into an infinite bus
- A 3-Phase Power supply is used to simulate the grid
- Load switch is set to =Off= on the synchronisation unit
- The Synchronisation unit is set to =Intensity=
- The leads between the Synchronisation unit and the 3-Phase Wattmeter are reconnected
- The DC supply to the DC motor is switched on and the supply voltage is adjusted until the speed of the generator reaches =1500rpm=
- The DC Rotor supply is now turned on and the current is adjusted until the generator line voltage is =45V= which is the same amplitude of the 3-Phase supply
- The thee phase supply is now turned on
  + It is noted that the three lights on the synchronisation unit now begin to flash at =\approx0.5Hz=
- The motor speed is then adjusted by varying the DC motor current until the lights cease to flash.
- The Load switch is now set to =On=
  + it is noted that the lights now Cease to flash meaning the synchronous machine is now synchronised with the 3-Phase supply

**** Zero Apparent power flow - (Step 2)
- The Rotor field excitation current and the DC Motor Current (its torque) is adjusted to minimise the AC stator current
  + the generator is neither motoring or generating with losses supplied by the DC motor (no real power is flowing between the grid and the synchronous machine)

*** Test 1 - Generating with unity power factor (Zero Q)- (Step 3)
**** Procedure
- The Current to the DC motor is increased until the stator current is roughly \(2/3\; I_{nom}\) which is calculated as =464mA=
  + I Guess this will be primarily real power
- the rotor excitation current is then adjusted until the stator current is minimised
  + cancelling out the reactive power by altering the magnitude of the EMF?
- Once the stator current is minimised, the following are recorded
  + Final stator current
  + Prime mover input power
  + rotor excitation current
  + Terminal voltage
  + Power factor
  + rotor angle
- the synchronous speed of the rotor is then measured with the lamp thing

**** Results
#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Mesurements while operating at zero reactive power
#+NAME: tabGeneratingZeroS
|   | Measurand                | Value    |
|---+--------------------------+----------|
| ! | measurand                | val      |
|   | Field Excitation Current | 478 mA   |
|   | Line Current             | 417 mA   |
|   | Line Voltage             | 47.2 V   |
|   | Active Power             | 33.4 W   |
|   | Power Factor             | 1        |
|   | Prime Mover Input Power  | 105.67 W |
|   | Rotor (load) Angle       | 330°     |

***  Test 2 - Generating at rated current (Positive Q) - (Step 4)
**** Procedure
- The rotor excitation current is increased until the stator current reaches its nominal value.
  + the Prime-mover torque is kept constant
- The following are recorded:
  + Final stator current
  + Prime mover input power
  + rotor excitation current
  + Terminal voltage
  + Power factor
  + rotor angle

**** Results
#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Mesurements while operating at rated current with negative reactive power
#+NAME: tabGeneratingPosQ
|   | Measurand                | Value    |
|---+--------------------------+----------|
| ! | measurand                | val     |
|   | Field Excitation Current | 638 mA   |
|   | Line Current             | 689 mA   |
|   | Line Voltage             | 47.5 V   |
|   | Active Power             | 36.0 W   |
|   | Power Factor             | 0.63     |
|   | Prime Mover Input Power  | 104.48 W |
|   | Rotor (load) Angle       | 150°     |

*** Test 3 Generating at rated current (Negative Q) - (Step 5)
**** Procedure
- 24:29
- DC Motor Power is kept constant
- Rotor excitation current is reduced to the value measured in step 3: =478mA=
- Rotor excitation current is continually reduced until the stator current reaches its nominal value
- The following are recorded at this point:
  + Final stator current
  + Prime mover input power
  + rotor excitation current
  + Terminal voltage
  + Power factor
  + rotor angle
- the synchronising switch is opened and all power supplies are turned off

**** Results
#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Mesurements while operating at rated current and positive negative power
#+NAME: tabGeneratingNegQ
|   | Measurand                | Value   |
|---+--------------------------+---------|
| ! | measurand                | val     |
|   | Field Excitation Current | 334 mA  |
|   | Line Current             | 692 mA  |
|   | Line Voltage             | 47.6 V  |
|   | Active Power             | 42.8 W  |
|   | Power Factor             | –0.75   |
|   | Prime Mover Input Power  | 110.2 W |
|   | Rotor (load) Angle       | 150°    |

* Deductions
** Synchronous Impedance Plot

#+NAME: pltSyncrinousImpedancePlot
#+BEGIN_SRC jupyter-python :session test :var ocData=tabOcTest scData=tabScTest :exports results
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
plt.rcParams['figure.dpi'] = 300
plt.rcParams['savefig.dpi'] = 300

ocData = pd.DataFrame(ocData[1:], columns=ocData[0])
scData = pd.DataFrame(scData[1:], columns=scData[0])
scData['I_rot_A'] =scData['I_rot_mA']/1000
ocData['V_stat_Ph'] =ocData['V_stat_LL']/np.cbrt(3)

# here i'm interpolating the SC x axis to the OC x axis
zSync = scData[['I_stat','I_rot_A']].copy()
zSync['V_stat_LL']=np.interp(scData['I_rot_A'],ocData['I_rot_A'],ocData['V_stat_LL'])
zSync['V_stat_Ph']=zSync['V_stat_LL']/np.cbrt(3)
zSync['z_sync']=zSync['V_stat_Ph']/zSync['I_stat']
zSync = zSync.drop(zSync[np.isinf(zSync.z_sync)].index)

ax = scData.plot(x='I_rot_A',y='I_stat',figsize=(8, 4),marker = "+")
ax.set_xlabel("$I_{rotor}$ (A)")
ax.set_ylabel("$I_{stat}$ (A)")
ax.legend(loc='upper left')
ax.grid('on')
ax.set_xlim([0,0.55])
ax.set_ylim(ymin = 0)
ax.yaxis.label.set_color('b')

ax2 = ax.twinx()
ocData.plot(ax=ax2,x='I_rot_A',y='V_stat_LL',figsize=(8, 4),marker = "o",color='g')
ax2.set_ylabel("$V_{stat}$ ($V_{LL}$)")
ax2.set_ylim(ymin = 0)
ax2.yaxis.label.set_color('g')

ax3 = ax.twinx()
ax3.spines.right.set_position(("axes", 1.1))
ax3.set_ylim([0,0.05])
ax3.set_ylabel("Sync Impedence $Z_s$ ($\Omega$)")
ax3.yaxis.label.set_color('r')
zSync.plot(ax=ax3,x='I_rot_A',y='z_sync',marker="^",color='r',label="$Z_s$ (Calculated)")

ax.vlines(x=zSync.I_rot_A, ymin=0, ymax=zSync.I_stat,linestyle='--',color='b',lw=1)
ax2.hlines(y=zSync.V_stat_LL,xmax=0.6,xmin=zSync.I_rot_A,linestyle='--',color='g',lw=1)
fig=zSync.plot(ax=ax2,x='I_rot_A',y='V_stat_LL',marker="^",color='r',linestyle=':',lw=3)
out =ax2.legend(loc='lower right')
#+End_src

#+ATTR_LATEX: placement [H] :booktabs t:
#+caption: Synchronous Impedance Calculated according to Equation ref:equation.
#+NAME: figSynchrinousImpedance
#+RESULTS: pltSyncrinousImpedancePlot
[[file:./.ob-jupyter/1ae32148794ed53aed22ddaf3102e86aa83a28af.png]]
